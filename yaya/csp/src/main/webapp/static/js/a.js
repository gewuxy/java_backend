!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="../",e(e.s=63)}([function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(74),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,o.default)(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()},function(t,e,n){"use strict";e.__esModule=!0;var i=n(73),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=o.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}},function(t,e,n){"use strict";var i,o=n(25),r=function(t){return t&&t.__esModule?t:{default:t}}(o);!function(o){var a={},s=[].slice,u={},c=function(t,e,n,i){var o=u[t];o||(o=u[t]={}),o[e]=[],o[e].push({func:n,context:i||a})},l=function(t,e,n,i){c(t,e,function o(){return a.off(t,e,o),n.apply(i||a,arguments)},i)},f=function(t,e,n){if(u[t]&&u[t][e]&&u[t][e].length){for(var i=u[t][e],o=[],r=i.length;r--;)o.push({handler:i[r],args:s.call(arguments,1)});!function(){var t=+new Date;do{var e=o.shift(),n=e.handler;try{n.func.apply(n.context,e.args)}catch(t){}}while(o.length&&+new Date-t<50);o.length>0&&setTimeout(arguments.callee,25)}()}},d=function(t,e,n,i){if(i=i||a,u[t]&&u[t][e]&&u[t][e].length)for(var o,r=u[t][e],s=r.length;s--;)o=r[s],o.func===n&&o.context===i&&r.splice(s,1)};a.on=c,a.once=l,a.trigger=f,a.off=d,o.listener=a,"object"===(0,r.default)(n(50))&&n(50)?void 0!==(i=function(){return a}.call(e,n,e,t))&&(t.exports=i):void 0!==t&&t.exports?(t.exports=a,t.exports.listener=a):window.listener=a}(window)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),s=i(a),u=n(1),c=i(u),l=n(10),f={0:"聊天",1:"主播",2:"相关直播"},d=function(){function t(){(0,s.default)(this,t)}return(0,c.default)(t,null,[{key:"init",value:function(){l.DYBase.initPoint(),l.DYBase.setPointPage("page_studio_l")}},{key:"init_page_studio_l",value:function(t){l.DYBase.setPointSub("init_page_studio_l",{tid:t})}},{key:"click_play",value:function(t){l.DYBase.setPointSub("click_play",(0,r.default)({type:1,stat:1},t))}},{key:"click_open_app",value:function(t){l.DYBase.setPointSub("click_open_app",{b_name:f[t]})}},{key:"click_lmsg",value:function(){l.DYBase.setPointSub("click_lmsg",{})}},{key:"click_lgift",value:function(){l.DYBase.setPointSub("click_lgift",{})}},{key:"click_hshare",value:function(){l.DYBase.setPointSub("click_hshare",{})}},{key:"click_hshare_toshare",value:function(t){l.DYBase.setPointSub("click_hshare_toshare",{type:t})}},{key:"click_similarlive_room",value:function(t){l.DYBase.setPointSub("click_similarlive_room",{rid:t||0})}},{key:"click_author_video",value:function(t){l.DYBase.setPointSub("click_author_video",{vid:t||""})}},{key:"click_author_lfollow",value:function(){l.DYBase.setPointSub("click_author_lfollow",{})}},{key:"click_ltab",value:function(t){l.DYBase.setPointSub("click_ltab",{b_name:f[t]})}}]),t}();e.default=d},function(t,e,n){t.exports=!n(15)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(19),o=n(42),r=n(35),a=Object.defineProperty;e.f=n(6)?Object.defineProperty:function(t,e,n){if(i(t),e=r(e,!0),i(n),o)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(43),o=n(26);t.exports=function(t){return i(o(t))}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.DYBase=e.DYBrowser=void 0;var o=n(2),r=i(o),a=n(0),s=i(a),u=n(1),c=i(u);n(54),n(110),n(111),n(61);var l=n(60),f=(i(l),n(38)),d=i(f),p=function(){var t=navigator.userAgent.toLowerCase();return{isMobile:!!t.match(/AppleWebKit.*Mobile.*/i),isWX:!!t.match(/MicroMessenger/i),isWB:!!t.match(/WeiBo/i),isQQ:!!t.match(/QQ/i),isDyAndroid:!!t.match(/Douyu_Android/i),isDyIOS:!!t.match(/Douyu_IOS/i),isIOS:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/i),isIOSHD:!!t.match(/ipad/i)}}(),h=function(){function t(){(0,s.default)(this,t)}return(0,c.default)(t,null,[{key:"initPoint",value:function(){if($SYS&&$SYS.cookie_pre)try{var t=d.default.codeGenerator();document.cookie=$SYS.cookie_pre+"did="+t}catch(t){}}},{key:"setPointPage",value:function(t){window.DYS?window.DYS.sub.setPageCode(t):that.error("window.DYS is undefined,pleace check you javascript import")}},{key:"setPointSub",value:function(t,e){if(t)if(window.DYS){var n=(0,r.default)({action_code:"123",page_code:"",ct_code:"h5",pro_code:"host_site",ext:null},{action_code:t,ext:e});window.DYS.sub(n)}else that.error("window.DYS is undefined,pleace check you javascript import")}}]),t}();e.DYBrowser=p,e.DYBase=h},function(t,e){var n=t.exports={version:"2.5.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var i=n(8),o=n(23);t.exports=n(6)?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(33)("wks"),o=n(24),r=n(4).Symbol,a="function"==typeof r;(t.exports=function(t){return i[t]||(i[t]=a&&r[t]||(a?r:o)("Symbol."+t))}).store=i},function(t,e,n){"use strict";var i=n(2),o=function(t){return t&&t.__esModule?t:{default:t}}(i),r=function(){var t=navigator.userAgent.toLowerCase();return{isMobile:!!t.match(/AppleWebKit.*Mobile.*/i),isWX:"micromessenger"==t.match(/MicroMessenger/i),isWB:"weibo"==t.match(/WeiBo/i),isQQ:"qq"==t.match(/QQ/i),isIOS:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/i),isIOSHD:t.match(/ipad/i)}}(),a=function(){var t=document.body.clientWidth,e={},n=function(){return(t/750).toFixed(2)},i=function(t){return t?(parseInt(t.replace(/px/g,""))*n()).toFixed(0)+"px":"0px"};return function(){[12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44].map(function(t){var n="fs"+t,o=i(t+"px");e[n]={fontSize:o}})}(),e}(),s=function(t,e){window.layer.open({content:t||"",time:e||2,skin:"msg"})},u=function(t){var e=(0,o.default)({url:"",type:"POST",dataType:"json",data:{},success:null,error:function(){}},t);$.ajax(e)},c=function(t){return t.toString().match(/万/g)?t:(t=parseInt(t))<1e4?t:t%1e4>0?(t/1e4).toFixed(1)+"万":parseInt(t/1e4)+"万"},l=function(t,e){return t&&t.length>e?t.substr(0,e)+"···":t},f={getYYYY:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date).getFullYear()},getMM:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=t.getMonth()+1;return e<10&&(e="0"+e.toString()),e},getDD:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=t.getDate();return e<10&&(e="0"+e.toString()),e},getYYYYMMDD:function(){return this.getYYYY()+"."+this.getMM()+"."+this.getDD()}};t.exports={G_FONTSIZE_STYLES:a,SET_TOAST:s,G_BROWSER_JUDGES:r,G_AJAX:u,SET_ONLINE:c,SET_STR_MAX:l,G_TIMER:f}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var i=n(47),o=n(27);t.exports=Object.keys||function(t){return i(t,o)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(18),r=i(o),a=n(2),s=i(a),u=n(0),c=i(u),l=n(1),f=i(l),d=n(10),p=n(55),h=i(p),v=n(56),m=i(v),g=function(){function t(){(0,c.default)(this,t),this.shareSetting={name:"",proname:"",content:"",url:"",srcid:"",link:window.location.href,platform:0,from:"douyu"}}return(0,f.default)(t,[{key:"getToken",value:function(){return h.default.getToken()}},{key:"getLoginStatus",value:function(){var t=this.getToken();return!!(t&&t.length>20)}},{key:"setLoginCallBack",value:function(t){t&&(window.appLoginBack=t)}},{key:"setGoToRoom",value:function(t,e,n){d.DYBrowser.isDyAndroid||d.DYBrowser.isDyIOS?h.default.setGoToRoom(t,e,n):m.default.openAppRoom(t,e,n)}},{key:"setGoToVideoRoom",value:function(t,e,n){d.DYBrowser.isDyAndroid||d.DYBrowser.isDyIOS?h.default.setGoToVideo(t,"",""):m.default.openVideoRoom(t,e,n)}},{key:"setLoginIn",value:function(t){var e=this;return e.getLoginStatus()?e.getToken():t?(h.default.setLoginShow(),e.setLoginCallBack(t),""):""}},{key:"setAppShare",value:function(t){this.shareSetting=(0,s.default)(this.shareSetting,t),this._setAppShareInit(),d.DYBrowser.isWX&&window.wx&&this.setWXShareInit()}},{key:"_setAppShareInit",value:function(t){var e=(0,r.default)(t);return window.getShareData=function(){return window.WebViewJavascriptBridge?window.WebViewJavascriptBridge.send(e):document.addEventListener("WebViewJavascriptBridgeReady",function(){window.WebViewJavascriptBridge.send(e)},!1),1},h.default.setAppShare(t)}},{key:"setAppShareClick",value:function(t){h.default.setShareShow(t)}},{key:"_setWXConfig",value:function(t){var e=this;window.wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]});var n={title:e.shareSetting.name,desc:e.shareSetting.content,link:location.href,imgUrl:e.shareSetting.url,success:function(){},cancel:function(){}};window.wx.ready(function(){window.wx.onMenuShareTimeline(n),window.wx.onMenuShareAppMessage(n),window.wx.onMenuShareQQ(n),window.wx.onMenuShareWeibo(n),window.wx.onMenuShareQZone(n)})}},{key:"setWXShareInit",value:function(){var t=this;$.ajax({url:"/special/wxShare/getSign",type:"GET",dataType:"json",data:{url:location.href},success:function(e){t._setWXConfig(e)}})}},{key:"getAppInfo",value:function(){return h.default.getAppInfo()}},{key:"getAppVersion",value:function(){return h.default.getAppVersion()}},{key:"setGotoPage",value:function(t){h.default.setToPage(t.id,t.extra)}},{key:"callApp",value:function(t){m.default.openAppNew(t)}},{key:"setWebviewClose",value:function(){h.default.setWebviewClose()}},{key:"setRouteStart",value:function(t,e,n){h.default.setRouteStart(t,e,n)}},{key:"setViewTitle",value:function(t){h.default.setViewTitle(t)}},{key:"setPromotePayShow",value:function(t){h.default.setPromotePayShow(t)}},{key:"setRightButton",value:function(t,e){h.default.setRightButton(t,e)}},{key:"setStatusBarColor",value:function(t){h.default.setStatusBarColor(t)}},{key:"openApp",value:function(){m.default.openApp()}}]),t}(),y=new g;e.default=y},function(t,e,n){t.exports={default:n(77),__esModule:!0}},function(t,e,n){var i=n(21);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var i=n(4),o=n(11),r=n(85),a=n(12),s=function(t,e,n){var u,c,l,f=t&s.F,d=t&s.G,p=t&s.S,h=t&s.P,v=t&s.B,m=t&s.W,g=d?o:o[e]||(o[e]={}),y=g.prototype,w=d?i:p?i[e]:(i[e]||{}).prototype;d&&(n=e);for(u in n)(c=!f&&w&&void 0!==w[u])&&u in g||(l=c?w[u]:n[u],g[u]=d&&"function"!=typeof w[u]?n[u]:v&&c?r(l,i):m&&w[u]==l?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):h&&"function"==typeof l?r(Function.call,l):l,h&&((g.virtual||(g.virtual={}))[u]=l,t&s.R&&y&&!y[u]&&a(y,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(76),r=i(o),a=n(75),s=i(a),u="function"==typeof s.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t};e.default="function"==typeof s.default&&"symbol"===u(r.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":void 0===t?"undefined":u(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports={}},function(t,e){t.exports=!0},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var i=n(8).f,o=n(7),r=n(13)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,r)&&i(t,r,{configurable:!0,value:e})}},function(t,e,n){var i=n(33)("keys"),o=n(24);t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e,n){var i=n(4),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(21);t.exports=function(t,e){if(!i(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!i(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var i=n(4),o=n(11),r=n(29),a=n(37),s=n(8).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=r?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){e.f=n(13)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(57),o=function(t){return t&&t.__esModule?t:{default:t}}(i),r=function(){try{var t=window.localStorage&&window.localStorage.getItem("DY-H5-DID")||"";if(t)return t;var e=o.default.codeGenerator();return window.localStorage&&localStorage.setItem("DY-H5-DID",e),e}catch(t){return""}};e.default={codeGenerator:r}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),s=i(a),u=n(1),c=i(u);n(118);var l=function(){function t(e){(0,s.default)(this,t),this.config=(0,r.default)({$root:null},e),this.init()}return(0,c.default)(t,[{key:"render",value:function(){this.config.$root.html('\n            <p class="c-loading">数据加载中···</p>\n        ')}},{key:"init",value:function(){this.render()}}]),t}();e.default=l},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var i=n(21),o=n(4).document,r=i(o)&&i(o.createElement);t.exports=function(t){return r?o.createElement(t):{}}},function(t,e,n){t.exports=!n(6)&&!n(15)(function(){return 7!=Object.defineProperty(n(41)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(40);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){"use strict";var i=n(29),o=n(20),r=n(48),a=n(12),s=n(7),u=n(28),c=n(89),l=n(31),f=n(97),d=n(13)("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,v,m,g,y){c(n,e,v);var w,b,_,k=function(t){if(!p&&t in A)return A[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",x="values"==m,O=!1,A=t.prototype,P=A[d]||A["@@iterator"]||m&&A[m],M=P||k(m),T=m?x?k("entries"):M:void 0,V="Array"==e?A.entries||P:P;if(V&&(_=f(V.call(new t)))!==Object.prototype&&_.next&&(l(_,S,!0),i||s(_,d)||a(_,d,h)),x&&P&&"values"!==P.name&&(O=!0,M=function(){return P.call(this)}),i&&!y||!p&&!O&&A[d]||a(A,d,M),u[e]=M,u[S]=h,m)if(w={values:x?M:k("values"),keys:g?M:k("keys"),entries:T},y)for(b in w)b in A||r(A,b,w[b]);else o(o.P+o.F*(p||O),e,w);return w}},function(t,e,n){var i=n(19),o=n(94),r=n(27),a=n(32)("IE_PROTO"),s=function(){},u=function(){var t,e=n(41)("iframe"),i=r.length;for(e.style.display="none",n(87).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;i--;)delete u.prototype[r[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=i(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:o(n,e)}},function(t,e,n){var i=n(47),o=n(27).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,o)}},function(t,e,n){var i=n(7),o=n(9),r=n(84)(!1),a=n(32)("IE_PROTO");t.exports=function(t,e){var n,s=o(t),u=0,c=[];for(n in s)n!=a&&i(s,n)&&c.push(n);for(;e.length>u;)i(s,n=e[u++])&&(~r(c,n)||c.push(n));return c}},function(t,e,n){t.exports=n(12)},function(t,e,n){var i=n(26);t.exports=function(t){return Object(i(t))}},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,n){"use strict";!function(e){var n=0,i=!1,o=function(t){for(var e=t.target;e!==document.body;){var i=window.getComputedStyle(e);if(!i)break;if("INPUT"===e.nodeName&&"range"===e.getAttribute("type"))return;var o=i.getPropertyValue("-webkit-overflow-scrolling"),r=i.getPropertyValue("overflow-y"),a=parseInt(i.getPropertyValue("height"),10),s="touch"===o&&("auto"===r||"scroll"===r),u=e.scrollHeight>e.offsetHeight;if(s&&u){var c=t.touches?t.touches[0].screenY:t.screenY,l=n<=c&&0===e.scrollTop,f=n>=c&&e.scrollHeight-e.scrollTop===a;return void((l||f)&&t.preventDefault())}e=e.parentNode}t.preventDefault()},r=function(t){n=t.touches?t.touches[0].screenY:t.screenY},a=function(){window.addEventListener("touchstart",r,!1),window.addEventListener("touchmove",o,!1),i=!0},s=function(){window.removeEventListener("touchstart",r,!1),window.removeEventListener("touchmove",o,!1),i=!1},u=function(){return i},c=document.createElement("div");document.documentElement.appendChild(c),c.style.WebkitOverflowScrolling="touch";var l="getComputedStyle"in window&&"touch"===window.getComputedStyle(c)["-webkit-overflow-scrolling"];document.documentElement.removeChild(c),l&&a();var f={enable:a,disable:s,isEnabled:u};void 0!==t&&t.exports?t.exports=f:e.iNoBounce=f}(void 0)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),s=i(a),u=n(1),c=i(u);n(117);var l=n(72),f=i(l),d=n(71),p=i(d),h=n(65),v=i(h),m=n(70),g=i(m),y=n(69),w=i(y),b=function(){function t(e){(0,s.default)(this,t),this.config=(0,r.default)({$root:$("#root"),room:{room_id:0,roomSrc:"",isVertical:1,isLive:!1},video:{vid:"",videoSrc:"",isVertical:!1}},e),this.init()}return(0,c.default)(t,[{key:"render",value:function(){this.config.$root.html('\n            <div class="p-room">\n                <div class="l-video">\n                </div>\n                <div class="l-tabs">\n                </div>\n                <div class="l-banner">\n                </div>\n            </div>\n        ')}},{key:"initVideo",value:function(){new f.default({$root:this.config.$root.find(".l-video"),room:this.config.room,video:this.config.video})}},{key:"initTabs",value:function(){new p.default({$root:this.config.$root.find(".l-tabs"),tabIdx:this.config.room.isLive?0:1,room:this.config.room,video:this.config.video})}},{key:"initBanner",value:function(){new v.default({$root:this.config.$root.find(".l-banner"),tabIdx:this.config.room.isLive?0:1,room:this.config.room})}},{key:"initShare",value:function(){new g.default({$root:this.config.$root,room:this.config.room})}},{key:"initModal",value:function(){new w.default({$root:this.config.$root})}},{key:"init",value:function(){this.render(),this.initModal(),this.initTabs(),this.initBanner(),this.initVideo(),this.initShare()}}]),t}();e.default=b},function(t,e){},function(t,e,n){"use strict";!function(t,e){function n(){var e=window.innerWidth,n=window.innerHeight,i=(e>n?n:e)/10;r.style.fontSize=i+"px",l.rem=t.rem=i}var i,o=t.document,r=o.documentElement,a=o.querySelector('meta[name="viewport"]'),s=o.querySelector('meta[name="flexible"]'),u=0,c=0,l=e.flexible||(e.flexible={});if(a){var f=a.getAttribute("content").match(/initial\-scale=([\d\.]+)/);f&&(c=parseFloat(f[1]),u=parseInt(1/c))}else if(s){var d=s.getAttribute("content");if(d){var f=d.match(/initial\-dpr=([\d\.]+)/),p=d.match(/maximum\-dpr=([\d\.]+)/);f&&(u=parseFloat(f[1]),c=parseFloat((1/u).toFixed(2))),p&&(u=parseFloat(p[1]),c=parseFloat((1/u).toFixed(2)))}}if(!u&&!c){var h=(t.navigator.appVersion.match(/android/gi),t.navigator.appVersion.match(/iphone/gi)),v=t.devicePixelRatio;u=h?v>=3&&(!u||u>=3)?3:v>=2&&(!u||u>=2)?2:1:1,c=1/u}if(r.setAttribute("data-dpr",t.devicePixelRatio),!a)if(a=o.createElement("meta"),a.setAttribute("name","viewport"),a.setAttribute("content","width=device-width initial-scale="+c+", maximum-scale="+c+", minimum-scale="+c+", user-scalable=no"),r.firstElementChild)r.firstElementChild.appendChild(a);else{var m=o.createElement("div");m.appendChild(a),o.write(m.innerHTML)}t.addEventListener("pageshow",function(t){t.persisted&&(clearTimeout(i),i=setTimeout(n,300))},!1),n(),l.dpr=t.dpr=u,l.refreshRem=n,l.rem2px=function(t){var e=parseFloat(t)*this.rem;return"string"==typeof t&&t.match(/rem$/)&&(e+="px"),e},l.px2rem=function(t){var e=parseFloat(t)/this.rem;return"string"==typeof t&&t.match(/px$/)&&(e+="rem"),e}}(window,window.lib||(window.lib={}))},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(18),r=i(o),a=n(2),s=i(a),u=n(0),c=i(u),l=n(1),f=i(l),d=n(10),p=function(){function t(){(0,c.default)(this,t),this.apis={getAppInfo:{android:{api:"getAppInfo"},ios:{api:"getAppInfo"}},setAppShare:{android:{api:"setShareContent"},ios:{api:"dySetShareInfo"}},getToken:{android:{api:"getToken"},ios:{api:"getUserToken"}},setPayShow:{android:{api:"recharge"},ios:{api:"showPayView"}},setLoginShow:{android:{api:"relogin"},ios:{api:"showLoginView"}},gotoPage:{android:{api:"gotoPage"},ios:{api:"gotoPage"}},setJoinQQGroup:{android:{api:"joinQQGroup",params:""},ios:{api:"joinQQGroup",params:""}},setViewTitle:{android:{api:"setViewTitle"},ios:{api:"setViewTitle"}},setRouteStart:{android:{api:"setRouteStart",params:!0},ios:{api:"setRouteStart",params:!0}},exitWebView:{android:{api:"exitWebView"},ios:{api:"exitWebView"}},setPromotePayShow:{android:{api:"showPromotePay"},ios:{api:"showPromotePay"}},setRightButton:{android:{api:"setRightButton",params:"xx"},ios:{api:"setRightButton",params:"xx"}},setStatusBarColor:{android:{api:"setStatusBarColor",params:"#FFFFFF"},ios:{api:"setStatusBarColor",params:"#FFFFFF"}},setFreeFlow:{android:{api:"setFreeFlow"},ios:{api:"setFreeFlow"}}}}return(0,f.default)(t,[{key:"_chatApp",value:function(t){if(!t)return"";try{if(d.DYBrowser.isDyAndroid){if(!t.android)return"";var e=t.android.api,n=t.android.params;return void 0===n?window.Command[e]():window.Command[e](n)}if(d.DYBrowser.isDyIOS){if(!t.ios)return"";var i=t.ios.api,o=t.ios.params;return void 0===o?window.OCModel[i]():window.OCModel[i](o)}return""}catch(t){return""}}},{key:"_apiParams",value:function(t,e){if(!t)return"";var n=this.apis[t];return e&&(n.android.params=e.android.params,n.ios.params=e.ios.params),n}},{key:"getAppInfo",value:function(){var t=this._apiParams("getAppInfo");return this._chatApp(t)}},{key:"getAppVersion",value:function(){var t=this.getAppInfo(),e="0.0.0.0";t&&t.version&&(e=t.version);for(var n=e.split("."),i="",o=0;o<4;o++)i+=(3===o?".":"")+(n[o]||"0");return parseFloat(i)}},{key:"getToken",value:function(){var t=this._apiParams("getToken");return this._chatApp(t)}},{key:"setPayShow",value:function(){var t=this._apiParams("setPayShow");return this._chatApp(t)}},{key:"setLoginShow",value:function(t){var e=this._apiParams("setLoginShow");return t&&(window.appLoginBack=t),this._chatApp(e)}},{key:"setToPage",value:function(t,e){var n={},i=this;if(!t)return!1;switch(parseInt(t)){case 101:n=(0,s.default)({owner_uid:"",tab:2},e);break;case 102:n=(0,s.default)({owner_uid:"",currentCateName:"",tab:2},e);break;case 103:n=(0,s.default)({roomId:"",isVertical:0,vertical_src:""},e);break;case 104:n=(0,s.default)({vid:""},e);break;case 105:n=(0,s.default)({author_id:"",author_name:""},e);break;case 106:n=(0,s.default)({peer_uid:""},e);break;case 107:break;case 111:n=(0,s.default)({live_type:""},e)}var o={id:t,extra:n},a=this._apiParams("gotoPage",{android:{params:(0,r.default)(o)},ios:{params:function(){return i.getAppVersion()>=247?(0,r.default)(o):o}()}});return this._chatApp(a)}},{key:"setJoinQQGroup",value:function(t){var e=this._apiParams("setJoinQQGroup",{android:{params:t},ios:{params:t}});return this._chatApp(e)}},{key:"setAppShare",value:function(t){var e=(0,s.default)({name:"",proname:"",content:"",url:"",srcid:"",link:window.location.href,platform:0,from:"douyu"},t),n=(0,r.default)(this.shareSetting);window.getShareData=function(){return window.WebViewJavascriptBridge?window.WebViewJavascriptBridge.send(n):document.addEventListener("WebViewJavascriptBridgeReady",function(){window.WebViewJavascriptBridge.send(n)},!1),1};var i=this._apiParams("setAppShare",{android:{params:n},ios:{params:e}});return this._chatApp(i)}},{key:"setShareShow",value:function(t){var e=JSON.assign({name:"",proname:"",content:"",url:"",srcid:"",link:window.location.href,platform:0,from:"douyu"},t),n=(0,r.default)(e);try{if(d.DYBrowser.isDyIOS)return void(window.WebViewJavascriptBridge?window.WebViewJavascriptBridge.send(n):document.addEventListener("WebViewJavascriptBridgeReady",function(){window.WebViewJavascriptBridge.send(n)},!1));if(d.DYBrowser.isDyAndroid)return void window.Command.share(n)}catch(t){}}},{key:"setGoToRoom",value:function(t,e,n){this.setToPage(103,{roomId:t,isVertical:e,vertical_src:n});var i={android:{api:"gotoPage",params:(0,r.default)({position:e?4:3,roomId:t,cover_img:n})}};try{window.OCModel.gotoRoom(t,!!e,n)}catch(t){}return this._chatApp(i)}},{key:"setGoToVideo",value:function(t){this.setToPage(104,{vid:t});var e={ios:{api:"gotoVideo",params:t}};return this._chatApp(e)}},{key:"setViewTitle",value:function(t){var e=this._apiParams("setViewTitle",{android:{params:t},ios:{params:t}});return this._chatApp(e)}},{key:"setRouteStart",value:function(t,e,n){var i=this._apiParams("setRouteStart",{android:{params:t},ios:{params:t}});return t&&(e&&(window.setLocalBack=e),n&&(window.setViewRefresh=n)),this._chatApp(i)}},{key:"setWebviewClose",value:function(){var t=this._apiParams("exitWebView");return this._chatApp(t)}},{key:"setPromotePayShow",value:function(t){var e=this._apiParams("setPromotePayShow");return t&&(window.appPromotePayBack=t),this._chatApp(e)}},{key:"setRightButton",value:function(t,e){var n=this._apiParams("setRightButton",{android:{params:t},ios:{params:t}});return e&&(window.appRightButtonClick=e),this._chatApp(n)}},{key:"setStatusBarColor",value:function(t){var e=this._apiParams("setStatusBarColor",{android:{params:t},ios:{params:t}});return this._chatApp(e)}},{key:"setFreeFlow",value:function(){var t=this._apiParams("setFreeFlow");return this._chatApp(t)}}]),t}();t.exports=function(){return new p}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(18),r=i(o),a=n(0),s=i(a),u=n(1),c=i(u),l=n(10),f=function(){function t(){(0,s.default)(this,t),this.QIE_URL="http://live.qq.com/api/douyu",this.schema={android:"douyutvtest://",android_old:"douyutvtest://platformapi/startApp",ios:"douyutv://",ioshd:"douyutvhd://"}}return(0,c.default)(t,[{key:"_callApp",value:function(t){var e="";for(var n in t)if(n){var i=t[n],o=e?"&":"?";e+=""+o+n+"="+i}window.location.href=this.QIE_URL+e}},{key:"_appOutChat",value:function(t){alert((0,r.default)(t));var e=this;if(!t)return"404";var n="";if(t.type<4){var i="?",o=this.schema.android,a=0;for(var s in t)s&&(i+=(0===a?"":"&")+s+"="+(t[s]||""),a++);l.DYBrowser.isIOS&&(o=this.schema.ios),l.DYBrowser.isIOS&&l.DYBrowser.isIOSHD&&(o=this.schema.ioshd),n=o+i}else if(4==t.type)if(l.DYBrowser.isIOS){var u=l.DYBrowser.isIOSHD?e.schema.ioshd:e.schema.ios;n=""+u+t.room_id+"&"+t.isVertical+"&"+t.room_src+"&0"}else n="douyutvtest://platformapi/startApp?room_id="+t.room_id+"&isVertical="+t.isVertical+"&room_src="+t.room_src+"&isVideo=0";else if(5==t.type)if(l.DYBrowser.isIOS){var c=l.DYBrowser.isIOSHD?e.schema.ioshd:e.schema.ios;n=""+c+t.room_id+"&&&1"}else n="douyutvtest://platformapi/startApp?room_id="+t.room_id+"&isVertical=&room_src=&isVideo=1";else n="#";window.location.href=n}},{key:"openAppRoom",value:function(t,e,n){var i={type:0,roomId:t,isVertical:e,roomSrc:n,isVideo:0};this._callApp(i)}},{key:"openApp",value:function(){var t={type:1};this._callApp(t)}},{key:"justDownload",value:function(t){var e={type:2,downUrl:t};this._callApp(e)}},{key:"openYubaDetail",value:function(t){var e={type:3,id:t};this._callApp(e)}},{key:"openAddFriend",value:function(t){var e={type:4,id:t};this._callApp(e)}},{key:"openAudioRoom",value:function(t){var e={type:6,roomId:t};this._callApp(e)}},{key:"openTopicPage",value:function(t){var e={type:7,topicId:t};this._callApp(e)}},{key:"openClassPage",value:function(t){var e={type:8,classId:t};this._callApp(e)}},{key:"openVideoRoom",value:function(t,e,n){var i={type:9,roomId:t,isVertical:e,roomSrc:n};this._callApp(i)}},{key:"openYubaPage",value:function(t,e){var n={type:10,id:t,page:e};this._callApp(n)}},{key:"openAppNew",value:function(t){this._appOutChat(t)}}]),t}();t.exports=function(){return new f}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),s=i(a),u=n(59),c=i(u),l={"iphone os":"IOS","mac os x":"OSX",android:"AND"},f={msie:"IE",chrome:"CHR",opera:"OPE",firefox:"FF",safari:"SAF",micromessenger:"WX",ucbrowser:"UC",qq:"QQ",baiduboxapp:"BD"},d=navigator.userAgent.toLowerCase(),p=function(){function t(){(0,r.default)(this,t)}return(0,s.default)(t,null,[{key:"isPC",value:function(){var t=function(t){var e=d.match(t);return e&&e.length>1?e[1]:""}(/(ipod|iphone|ipad)/),e=/android/.test(d)&&!/like android/.test(d),n=/[^-]mobi/.test(d);return("ipod"===t||"iphone"===t||e||/blackberry|\bbb\d+/.test(d)||/rim\stablet/.test(d)||/(web|hpw)os/.test(d)||/bada/i.test(d))&&(n=!0),!n}},{key:"ieVer",value:function(){if(!t.isPC())return!1;if("Microsoft Internet Explorer"!==navigator.appName)return!1;var e=navigator.appVersion,n=e.match(/MSIE\s.*?;/i)[0].match(/\d{1,2}/i)[0];return!n||parseInt(n,10)}},{key:"getOS",value:function(){var t=d.match(/(iphone os|android|mac os x|windows nt).*?([\d._]+)/);return!t||t.length<3?{os:"unknow",ver:""}:(t[1]=l[t[1]]||"",t[2]=(t[2]||"").replace(/_/g,"."),{os:t[1]||"unknow",ver:t[2]})}},{key:"browserInfo",value:function(){var t=d.match(/(msie|firefox|chrome|opera|micromessenger|version|safari).*?([\d.]+)/),e=d.indexOf("micromessenger")>-1,n=d.indexOf("ucbrowser")>-1,i=d.indexOf("qq")>-1,o=d.indexOf("baiduboxapp")>-1;if(e&&(t=d.match(/(micromessenger).*?([\d.]+)/)),n&&(t=d.match(/(ucbrowser).*?([\d.]+)/)),i&&(t=d.match(/(qq).*?([\d.]+)/)),o&&(t=d.match(/(baiduboxapp).*?([\d._]+)/)),!t||t.length<3)return{browser:"",ver:""};var r=(t[2]||"").replace(/_/g,".");return r=r.substr(0,r.indexOf(".")),{browser:f[(t[1]||"").replace(/version/,"safari")],ver:r}}},{key:"screenBounds",value:function(){return{w:window.screen.width,h:window.screen.height}}},{key:"codeGenerator",value:function(){var e=t.getOS(),n=t.browserInfo(),i=Date.now?Date.now():(new Date).getTime(),o=(""+Math.random()*c.default.random(1,10)).substr(-8);return e.os+"-"+n.browser+"|"+n.ver+"-"+o+i}}]),t}();e.default=p},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),s=i(a),u=function(){function t(){(0,r.default)(this,t)}return(0,s.default)(t,null,[{key:"each",value:function(t,e,n){n=n||{};var i=void 0;if(t instanceof Array){if(t.forEach)return t.forEach(e,n);for(i=0;i<t.length;i++)e&&e.call(n,t[i],i,t)}else for(i in t)({}).hasOwnProperty.call(t,i)&&e&&e.call(n,t[i],i,t)}},{key:"every",value:function(t,e,n){n=n||{};var i=void 0;if(t instanceof Array){if(t.every)return t.every(e,n);for(i=0;i<t.length;i++)if(!e.call(n,t[i],i,t))return!1}else for(i in t)if({}.hasOwnProperty.call(t,i)&&!e.call(n,t[i],i,t))return!1;return!0}},{key:"some",value:function(t,e,n){n=n||{};var i=void 0;if(t instanceof Array){if(t.some)return t.some(e,n);for(i=0;i<t.length;i++)if(e.call(n,t[i],i,t))return!0}else for(i in t)if({}.hasOwnProperty.call(t,i)&&e.call(n,t[i],i,t))return!0;return!1}},{key:"indexOf",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=void 0;if(t instanceof Array){if(t.indexOf)return t.indexOf(e,n);for(i=n;i<t.length;i++)if(t[i]===e)return i}else for(i in t)if({}.hasOwnProperty.call(t,i)&&t[i]===e)return i;return-1}}]),t}();e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(25),r=i(o),a=n(0),s=i(a),u=n(1),c=i(u),l=n(58),f=i(l),d=function(){function t(){(0,s.default)(this,t)}return(0,c.default)(t,null,[{key:"clone",value:function(t){if("object"!==(void 0===t?"undefined":(0,r.default)(t)))return t;if(t instanceof Array)return t.slice(0);var e={};return f.default.each(t,function(t,n){e[n]=t}),e}},{key:"isEmpty",value:function(t){if(t instanceof Array)return 0===t.length;if(t instanceof Object){for(var e in t)if({}.hasOwnProperty.call(t,e))return!1;return!0}return"string"==typeof t?""===t:null===t||void 0===t}},{key:"isSet",value:function(e){return!t.isEmpty(e)}},{key:"random",value:function(t,e){if(t>e){var n=t;t=e,e=n}return t+Math.random()*(e-t)}},{key:"dateFormat",value:function(t){return this.isEmpty(t)?null:new Date(t).toLocaleString()}},{key:"getRaf",value:function(){return window.requestAnimationFrame||window.msRequestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame}},{key:"getCraf",value:function(){return window.cancelAnimationFrame||window.mozCancelAnimationFrame}}]),t}();e.default=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),s=i(a),u=n(3),c=i(u),l=function(){function t(){(0,r.default)(this,t),this.init()}return(0,s.default)(t,[{key:"init",value:function(){this.getOrientation(),this.bindEvent()}},{key:"getOrientation",value:function(){var t=window.orientation;switch(t){case 90:case-90:t="landscape";break;default:t="portrait"}document.body.setAttribute("class",t),c.default.trigger("orientation","public",{isLandScape:!("landscape"!=t)})}},{key:"bindEvent",value:function(){window.addEventListener("orientationchange",this.getOrientation.bind(this),!1)}}]),t}(),f=function(){return new l}();e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o,r=n(25),a=i(r),s=n(18),u=i(s);n(112),function(i){var r=document,s="getElementsByClassName",c=function(t){return r.querySelectorAll(t)},l={type:0,shade:!0,shadeClose:!0,fixed:!0,anim:"scale"},f={extend:function(t){var e=JSON.parse((0,u.default)(l));for(var n in t)e[n]=t[n];return e},timer:{},end:{}};f.touch=function(t,e){t.addEventListener("click",function(t){e.call(this,t)},!1)};var d=0,p=["layui-m-layer"],h=function(t){var e=this;e.config=f.extend(t),e.view()};h.prototype.view=function(){var t=this,e=t.config,n=r.createElement("div");t.id=n.id=p[0]+d,n.setAttribute("class",p[0]+" "+p[0]+(e.type||0)),n.setAttribute("index",d);var i=function(){var t="object"===(0,a.default)(e.title);return e.title?'<h3 style="'+(t?e.title[1]:"")+'">'+(t?e.title[0]:e.title)+"</h3>":""}(),o=function(){"string"==typeof e.btn&&(e.btn=[e.btn]);var t,n=(e.btn||[]).length;return 0!==n&&e.btn?(t='<span yes type="1">'+e.btn[0]+"</span>",2===n&&(t='<span no type="0">'+e.btn[1]+"</span>"+t),'<div class="layui-m-layerbtn">'+t+"</div>"):""}();if(e.fixed||(e.top=e.hasOwnProperty("top")?e.top:100,e.style=e.style||"",e.style+=" top:"+(r.body.scrollTop+e.top)+"px"),2===e.type&&(e.content='<i></i><i class="layui-m-layerload"></i><i></i><p>'+(e.content||"")+"</p>"),e.skin&&(e.anim="up"),"msg"===e.skin&&(e.shade=!1),n.innerHTML=(e.shade?"<div "+("string"==typeof e.shade?'style="'+e.shade+'"':"")+' class="layui-m-layershade"></div>':"")+'<div class="layui-m-layermain" '+(e.fixed?"":'style="position:static;"')+'><div class="layui-m-layersection"><div class="layui-m-layerchild '+(e.skin?"layui-m-layer-"+e.skin+" ":"")+(e.className?e.className:"")+" "+(e.anim?"layui-m-anim-"+e.anim:"")+'" '+(e.style?'style="'+e.style+'"':"")+">"+i+'<div class="layui-m-layercont">'+e.content+"</div>"+o+"</div></div></div>",!e.type||2===e.type){var u=r[s](p[0]+e.type);u.length>=1&&layer.close(u[0].getAttribute("index"))}document.body.appendChild(n);var l=t.elem=c("#"+t.id)[0];e.success&&e.success(l),t.index=d++,t.action(e,l)},h.prototype.action=function(t,e){var n=this;t.time&&(f.timer[n.index]=setTimeout(function(){layer.close(n.index)},1e3*t.time));var i=function(){0==this.getAttribute("type")?(t.no&&t.no(),layer.close(n.index)):t.yes?t.yes(n.index):layer.close(n.index)};if(t.btn)for(var o=e[s]("layui-m-layerbtn")[0].children,r=o.length,a=0;a<r;a++)f.touch(o[a],i);if(t.shade&&t.shadeClose){var u=e[s]("layui-m-layershade")[0];f.touch(u,function(){layer.close(n.index,t.end)})}t.end&&(f.end[n.index]=t.end)},i.layer={v:"2.0",index:d,open:function(t){return new h(t||{}).index},close:function(t){var e=c("#"+p[0]+t)[0];e&&(e.innerHTML="",r.body.removeChild(e),clearTimeout(f.timer[t]),delete f.timer[t],"function"==typeof f.end[t]&&f.end[t](),delete f.end[t])},closeAll:function(){for(var t=r[s](p[0]),e=0,n=t.length;e<n;e++)layer.close(0|t[0].getAttribute("index"))}},void 0!==(o=function(){return layer}.call(e,n,e,t))&&(t.exports=o)}(window)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=666;navigator.appVersion.indexOf("MSIE")>0&&(i=350);var o=function(t){return"function"==typeof t},r=function(t,e,n){var i=t.length,o=e(i);return n(t.splice(0,o)),t},a=function t(e,n,o,a){var s=e.length;r(e,n,o),s=e.length,s<=0?a():setTimeout(function(){t(e,n,o,a)},i)},s=function(){return 1},u=function(){window.console&&console.log},c=function(){this.init.apply(this,arguments)};c.prototype.init=function(t){t=t||{},this.STATE=0,this.CACHE=[],this._hotplan=o(t.hotplan)?t.hotplan:s,this._render=o(t.render)?t.render:u,this._releaseRight=!!t.releaseRight},c.prototype.getLen=function(){return this.CACHE.length},c.prototype.push=function(t){return this.CACHE.length>6e3&&this.CACHE.splice(0,2e3),this.CACHE.push(t),this._releaseIf(),this},c.prototype._release=function(){var t=this.CACHE,e=this._hotplan,n=this._render,i=this;a(t,e,n,function(){i.STATE=0})},c.prototype._releaseIf=function(){var t=this;0===this.STATE&&(this.STATE=1,setTimeout(function(){t._release()},1e3))},e.default={create:function(t,e){return new c(t,e)}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(2),r=i(o),a=n(0),s=i(a),u=n(1),c=i(u),l=n(10);n(53);var f=n(3),d=i(f),p=n(52),h=i(p),v=n(51),m=i(v),g=n(5),y=i(g);(new(function(){function t(){(0,s.default)(this,t),this.config={tabIdx:0,room:(0,r.default)({room_id:0,roomSrc:"",isVertical:0,isLive:!1},window.$ROOM),video:(0,r.default)({vid:"",videoSrc:"",isVertical:!1},window.$VIDEO)},this.win={width:window.innerWidth,height:window.innerHeight},y.default.init()}return(0,c.default)(t,[{key:"render",value:function(){this.layout=new h.default({$root:$("#root"),room:this.config.room,video:this.config.video})}},{key:"init",value:function(){var t=this;d.default.on("orientation","public",function(e,n){if(n.isLandScape){var i=t.win.height>t.win.width?t.win.height:t.win.width;$("#root").height(i+"px"),l.DYBrowser.isIOS&&m.default.disable()}else $("#root").height("100%"),l.DYBrowser.isIOS&&m.default.enable()}),$(document).ready(function(){t.render(),y.default.init_page_studio_l(window.$ROOM&&window.$ROOM.cate2Id||"")})}}]),t}())).init()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),s=i(a),u=n(1),c=i(u);n(113);var l=n(39),f=i(l),d=n(14),p=n(17),h=i(p),v=n(5),m=i(v),g=function(){function t(e){(0,s.default)(this,t),this.config=(0,r.default)({$root:null,room:{room_id:0,roomSrc:"",isVertical:1,isLive:!1}},e),this.Vars={vodUrl:$SYS&&$SYS.vodUrl||""},this.init()}return(0,c.default)(t,[{key:"ajaxVideos",value:function(){var t=this;(0,d.G_AJAX)({url:"/video/getList",type:"GET",data:{rid:this.config.room.room_id},success:function(e){0==e.error&&t.render(e.data.roomInfo,e.data.videoList)}})}},{key:"renderVideoItem",value:function(t){return'\n            <a href="'+this.Vars.vodUrl+"show/"+t.vid+'">\n                <div class="video-item" data-vid='+t.vid+" data-pid="+t.point_id+'>\n                    <div class="post">\n                        <div \n                            class="pic" \n                            style="background-image:url('+t.video_pic+')"\n                        >\n                            <div class="pic-real" style="background-image:url('+t.video_pic+')"></div>\n                        </div>\n                        '+(t.title?'<div class="name">'+t.title+"</div>":"")+'\n                    </div>\n                    <div class="info">\n                        <span class="num">\n                            <i class="iconfont icon-play"></i>\n                            '+(0,d.SET_ONLINE)(t.view_num)+'\n                        </span>\n                        <span class="time">'+t.duration+"</span>\n                    </div>\n                </div>\n            </a>\n        "}},{key:"renderVideoList",value:function(t){var e=this;return t.map(function(t,n){return e.renderVideoItem(t)}).join("")}},{key:"renderLoading",value:function(){this.loading=new f.default({$root:this.config.$root})}},{key:"render",value:function(t,e){var n='\n            <div class="c-anchor">\n                <div class="anchor-info">\n                    <div class="main">\n                        <img \n                            class="face" \n                            src="'+t.avatar+'" \n                            alt=""\n                        />\n                        <p class="nick">'+t.nickname+'</p>\n                        <div class="other">\n                            <span class="cate">'+t.cate2Name+'</span>\n                            <span class="audience">'+(0,d.SET_ONLINE)(t.online)+'人观看</span>\n                        </div>\n                        <span class="focus btn-focus">\n                            <i class="iconfont icon-guanzhu"></i>\n                            <span>关注</span>\n                        </span>\n                    </div>\n                    '+(t.notice?'<div class="des">'+t.notice+"</div>":"")+"\n                </div>\n                "+(e.length>0?'\n                        <div class="anchor-videos">\n                            <div class="title">\n                                相关视频\n                            </div>\n                            <div class="content">\n                                '+this.renderVideoList(e)+"\n                            </div>\n                        </div> \n                    ":"")+"       \n            </div>\n        ";this.config.$root.html(n),this.bindEvent()}},{key:"bindEvent",value:function(){var t=this;this.config.$root.find(".face").on("click",function(){if(d.G_BROWSER_JUDGES.isWB)listener.trigger("sinaOpenApp","public",null);else{var e=t.config.room;h.default.setGoToRoom(e.room_id,e.isVertical,e.roomSrc)}}),this.config.$root.find(".btn-focus").on("click",function(){if(d.G_BROWSER_JUDGES.isWB)listener.trigger("sinaOpenApp","public",null);else{var e=t.config.room;h.default.setGoToRoom(e.room_id,e.isVertical,e.roomSrc)}m.default.click_author_lfollow()}),this.config.$root.find(".video-item").on("click",function(){var t=($(this).data("vid"),$(this).data("pid"));m.default.click_author_video(t)})}},{key:"init",value:function(){this.renderLoading(),this.ajaxVideos()}}]),t}();e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),s=i(a),u=n(1),c=i(u);n(114);var l=n(14),f=n(3),d=i(f),p=n(17),h=i(p),v=n(5),m=i(v),g=function(){function t(e){(0,s.default)(this,t),this.config=(0,r.default)({$root:null,tabIdx:0,room:{room_id:0,roomSrc:"",isVertical:1,isLive:!1}},e),this.init()}return(0,c.default)(t,[{key:"slideBanner",value:function(t){this.config.tabIdx=t,t&&t>0?(this.config.$root.find(".banner0").hide(),this.config.$root.find(".banner1").show()):(this.config.$root.find(".banner1").hide(),this.config.$root.find(".banner0").show())}},{key:"render",value:function(){this.config.$root.html('\n            <div class="banner0">\n                <span class="item btn-open-room" data-type="danmu">\n                    <i class="iconfont icon-chat"></i>弹幕\n                </span>\n                <span class="split"></span>\n                <span class="item btn-share" data-type="share">\n                    <i class="iconfont icon-share-new"></i>分享\n                </span>\n                <span class="split"></span>\n                <span class="item btn-open-room" data-type="gift">\n                    <i class="iconfont icon-gift"></i>送礼\n                </span>\n                <span class="btn btn-open-app"></span>\n            </div>\n            <div class="banner1">\n                <span class="btn btn-open-app"></span>\n            </div>\n        ')}},{key:"bindEvent",value:function(){var t=this;$(".banner0 .btn-share").on("click",function(){d.default.trigger("share","public",null),m.default.click_hshare()}),this.config.$root.find(".btn-open-room").on("click",function(e){if(l.G_BROWSER_JUDGES.isWB)d.default.trigger("sinaOpenApp","public",null);else{var n=t.config.room;h.default.setGoToRoom(n.room_id,n.isVertical,n.roomSrc)}var i=$(e.target).data("type");"danmu"==i&&m.default.click_lmsg(),"gift"==i&&m.default.click_lgift()}),this.config.$root.find(".btn-open-app").on("click",function(){l.G_BROWSER_JUDGES.isWB?d.default.trigger("sinaOpenApp","public",null):h.default.openApp(),m.default.click_open_app(t.config.tabIdx)}),d.default.on("toggleTab","public",function(e,n){t.slideBanner(n.tabIdx)})}},{key:"init",value:function(){this.render(),this.bindEvent(),this.slideBanner(this.config.tabIdx)}}]),t}();e.default=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(62),o=function(t){return t&&t.__esModule?t:{default:t}}(i),r={limitConfig:{vistor:200,normal:200,anchor:1e3,roomAdmin:1e3,superAdmin:1e3},isPause:!1},a={},s={};s.init=function(){s.$chatList=$("#js-barrage-content")},r.init=function(){r.limitMaxl=30},a.init=function(){var t=function(t){return 1};a.Queue=o.default.create({hotplan:t,render:function(t){a.addView(t.join(""))}})},a.addQueue=function(t){a.Queue.push(t)},a.addView=function(t){r.isPause||(s.$chatList.append(t),a.limit(),a.lenCallBack&&a.lenCallBack(a.Queue.getLen()),a.scrollToBottom&&a.scrollToBottom())},a.limit=function(){var t=s.$chatList.find(".dm-item"),e=t.length-r.limitMaxl;e>0&&t.slice(0,e).remove()},a.lenCallBack=null,e.default={init:function(t,e){s.init(),r.init(),a.init(),a.scrollToBottom=t,a.lenCallBack=e},pause:function(){r.isPause=!0},go:function(){r.isPause=!1},destory:function(){a=null},addQueue:function(t){void 0!==t&&""!==t&&a.addQueue(t)}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),s=i(a),u=n(1),c=i(u);n(115);var l=n(3),f=(i(l),n(66)),d=i(f),p=n(14),h=function(){function t(e){(0,s.default)(this,t),this.config=(0,r.default)({$root:null,room:{room_id:0}},e),this.Vars={chatHeight:this.config.$root.height(),t:0,count:100,sysTip:"斗鱼官方倡导绿色直播，对直播内容进行24小时在线巡查。"},this.init()}return(0,c.default)(t,[{key:"getBarrage",value:function(){this.ajaxDanMu()}},{key:"autoScroll",value:function(){d.default.go();var t=this.config.$root.find(".c-chat"),e=(t.find(".dm-item"),t.height()),n=e-this.Vars.chatHeight;n>0&&t.css("transform","translateY(-"+n+"px)")}},{key:"ajaxDanMu",value:function(t){var e=this;!("none"==this.config.$root.find(".c-chat").css("display"))&&(0,p.G_AJAX)({url:"/room/getBarrageList",type:"GET",data:{rid:this.config.room.room_id,t:this.Vars.t,count:this.Vars.count},success:function(n){0==n.error&&(e.Vars.t=n.data.t,n.data.list.map(function(t){d.default.addQueue(e.renderDMItem(t))}),t&&t(!!n.data.list.length))}})}},{key:"renderDMItem",value:function(t){return"\n            <p class='dm-item'><span>"+t.nickname+"：</span>"+t.content+"</p>\n        "}},{key:"render",value:function(){var t='\n            <div id="js-barrage-content" class="c-chat">\n                <div class=\'c-chat-tip\'>\n                    <span>系统消息 </span>'+this.Vars.sysTip+"\n                </div>\n            </div>\n        ";this.config.$root.html(t)}},{key:"bindEvent",value:function(){var t=this,e=this.config.$root.find(".c-chat"),n={};e.on("touchstart",function(e){e.preventDefault(),d.default.pause(),t.timerOut&&clearTimeout(t.timerOut),1==e.targetTouches.length&&(n={x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY})}),e.on("touchmove",function(i){if(1==i.targetTouches.length){var o=i.targetTouches[0].pageY-n.y,r=e.css("transform");if(r){var a=r.match(/translateY\((.*)px\)/);if(a){t.Vars.chatHeight=t.config.$root.height();var s=a[1],u=1*s+1*o*.4,c=t.Vars.chatHeight-e.height();u<0&&c<u&&e.css("transform","translateY("+u+"px)")}}}}),e.on("touchend",function(e){n={},t.timerOut=setTimeout(function(){d.default.go()},2e3)})}},{key:"initChat",value:function(){var t=this;d.default.init(this.autoScroll.bind(this),function(e){e<5&&t.getBarrage()})}},{key:"init",value:function(){this.render(),this.initChat(),this.bindEvent(),this.getBarrage()}}]),t}();e.default=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),s=i(a),u=n(1),c=i(u);n(116);var l=n(39),f=i(l),d=n(14),p=n(5),h=i(p),v=function(){function t(e){(0,s.default)(this,t),this.config=(0,r.default)({$root:null,room:{room_id:0,roomSrc:"",isVertical:1,isLive:!1}},e),this.init()}return(0,c.default)(t,[{key:"ajaxRooms",value:function(){var t=this;(0,d.G_AJAX)({url:"/room/getSimilarList",type:"GET",data:{rid:this.config.room.room_id},success:function(e){0==e.error&&t.render(e.data)}})}},{key:"renderItem",value:function(t){return'\n            <a href="/'+t.room_id+'">\n                <div class="depend-item" data-rid='+t.room_id+'>\n                    <div class="post">\n                        <div \n                            class="pic"\n                            style="background-image:url('+(1==t.isVertical?t.vertical_src:t.room_src)+')"\n                        >\n                            <div class="pic-real" style="background-image:url('+(1==t.isVertical?t.vertical_src:t.room_src)+')"></div>\n                        </div>\n                    </div>\n                    <div class="info">\n                        <div class="nick">'+t.nickname+'</div>\n                        <div class="num">\n                            <span>'+(0,d.SET_ONLINE)(t.online)+'</span>人观看\n                        </div>\n                        <div class="des">\n                            '+(0,d.SET_STR_MAX)(t.room_name,30)+"\n                        </div>\n                    </div>\n                </div>\n            </a>\n        "}},{key:"renderLoading",value:function(){this.loading=new f.default({$root:this.config.$root})}},{key:"renderList",value:function(t){var e=this;return t.map(function(t,n){return e.renderItem(t)}).join("")}},{key:"bindEvent",value:function(){this.config.$root.find(".depend-item").on("click",function(){var t=$(this).data("rid");h.default.click_similarlive_room(t)})}},{key:"render",value:function(t){var e='\n            <div class="c-depend">\n                '+this.renderList(t)+"\n            </div>\n        ";this.config.$root.html(e),this.bindEvent()}},{key:"init",value:function(){this.renderLoading(),this.ajaxRooms()}}]),t}();e.default=v},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),s=i(a),u=n(1),c=i(u);n(119);var l=n(3),f=i(l),d=function(){function t(e){(0,s.default)(this,t),this.config=(0,r.default)({$root:null},e),this.init()}return(0,c.default)(t,[{key:"render",value:function(){this.config.$root.append('\n            <div class="c-sina-tip">\n                <div class="sina-tip"></div>\n            </div>\n        ')}},{key:"toggleModal",value:function(t){t?this.config.$root.find(".c-sina-tip").show():this.config.$root.find(".c-sina-tip").hide()}},{key:"bindEvent",value:function(){var t=this;f.default.on("sinaOpenApp","public",function(){t.toggleModal(!0)}),this.config.$root.find(".c-sina-tip").on("click",function(){t.toggleModal(!1)})}},{key:"init",value:function(){this.render(),this.bindEvent()}}]),t}();e.default=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),s=i(a),u=n(1),c=i(u);n(120);var l=n(3),f=i(l),d=n(17),p=i(d),h=n(5),v=i(h),m=function(){function t(e){(0,s.default)(this,t),this.config=(0,r.default)({$root:null,room:{roomName:"",isLive:0,room_id:0,isVertical:"0",roomSrc:"",shareTitle:""}},e),this.Vars={doms:null,shareSetting:{roomName:this.config.room.roomName,title:this.config.room.shareTitle,url:window.location.origin+"/"+this.config.room.room_id,desc:this.config.room.shareTitle,imgUrl:this.config.room.roomSrc}},this.init()}return(0,c.default)(t,[{key:"render",value:function(){var t='\n            <div class=\'overlay\'>\n\n            <div class="c-share">\n                <p>分享到</p>\n                <div class="share-list" data-share-btn="more">\n                    <a id="weixin" href="javascript:;" data-point-2="1">\n                        <div class="img weixin"></div>\n                        <span>微信</span>\n                    </a>\n                    <a href="javascript:;" target="_blank" data-to="cqq" data-point-2="3">\n                        <div class="img qq"></div>\n                        <span>QQ</span>\n                    </a>\n                    <a href="javascript:;" target="_blank" data-to="qzone" data-point-2="4">\n                        <div class="img qzone"></div>\n                        <span>QQ空间</span>\n                    </a>\n                    <a href="javascript:;" target="_blank" data-to="tsina" data-point-2="2">\n                        <div class="img tsina"></div>\n                        <span>微博</span>\n                    </a>\n                </div>\n                <div class="close">取 消</div>\n            </div>\n            </div>\n            <div class="c-wx-modal" id="url-modal" style="display: none;">\n                <div class="mask close"></div>\n                <div class="modal-body url-content">\n                    <div class="x-close close"><i class="iconfont icon-guanbi"></i></div>\n                    <p>分享到朋友圈</p>\n                    <div class="moe"></div>\n                    <p class="url">'+this.Vars.shareSetting.url+'</p>\n                    <p class="description">#斗鱼#  我正在斗鱼观看直播'+this.Vars.shareSetting.roomName+"，你也快来加入吧~</p>\n                    <span>长按复制地址</span>\n                </div>\n            </div>\n            \n        ";this.config.$root.append(t)}},{key:"shareToThird",value:function(t,e){if(!t)return!1;var n="";"tsina"==t&&(n="&appkey=979098171&ralateuid=3982726153");var i=this.Vars.shareSetting.url,o="http://www.jiathis.com/send/?webid="+t+"&url="+encodeURIComponent(i)+"&title=&summary="+encodeURIComponent("#斗鱼#  我正在斗鱼观看直播 “"+this.Vars.shareSetting.roomName+" ”，你也快来加入吧~")+"&uid=1896137&data_track_clickback=true&pic="+encodeURIComponent(this.Vars.shareSetting.imgUrl)+n;e.attr("href",o)}},{key:"bindEvent",value:function(){var t=this,e=this.Vars.doms;e.shareMoreBtn.on("click",function(e){var n=$(this),i=n.attr("data-to"),o="";switch(i){case"tsina":o="sinawb";break;case"cqq":o="qq";break;case"qzone":o="qzone"}t.shareToThird(i,n),v.default.click_hshare_toshare(o)}),e.weixinShare.on("click",function(t){e.urlModal.show(),f.default.trigger("wxtoggle","public",{flag:!0}),v.default.click_hshare_toshare("weixin")}),e.urlModal.on("click",".close",function(t){e.urlModal.hide(),f.default.trigger("wxtoggle","public",{flag:!1})}),e.close.on("click",function(t){e.overlay.removeClass("open")}),f.default.on("share","public",function(){e.overlay.addClass("open")}),e.overlay.on("click",function(t){e.overlay.removeClass("open")})}},{key:"getDoms",value:function(){var t=$(".share-list");this.Vars.doms={share:$(".c-share"),close:$(".c-share .close"),overlay:$(".overlay"),shareBtn:t,shareMoreBtn:t.find("[data-to]"),weixinShare:$("#weixin"),urlModal:$("#url-modal")}}},{key:"initWXShare",value:function(){p.default.setAppShare({name:this.Vars.shareSetting.title,proname:this.Vars.shareSetting.title,content:this.Vars.shareSetting.title,url:this.Vars.shareSetting.imgUrl,srcid:this.Vars.shareSetting.imgUrl,link:window.location.href,platform:0,from:"douyu"})}},{key:"init",value:function(){this.render(),this.getDoms(),this.bindEvent(),this.initWXShare()}}]),t}();e.default=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),s=i(a),u=n(1),c=i(u);n(121);var l=n(3),f=i(l),d=n(67),p=i(d),h=n(64),v=i(h),m=n(68),g=i(m),y=n(5),w=i(y),b=function(){function t(e){(0,s.default)(this,t),this.config=(0,r.default)({$root:null,tabIdx:0,room:{room_id:0,roomSrc:"",isVertical:1,isLive:!1},tabs:[{type:0,title:"聊天"},{type:1,title:"主播"},{type:2,title:"相关直播"}]},e),this.child={appChat:null,anchor:null,depend:null},this.init()}return(0,c.default)(t,[{key:"renderNavs",value:function(){var t=this;return this.config.tabs.map(function(e,n){return'\n                <div \n                    class="'+(n==t.config.tabIdx?"item cur":"item")+'"\n                    data-idx="'+n+'"\n                >\n                    '+e.title+"\n                </div>\n            "}).join("")}},{key:"render",value:function(){var t='\n            <div class="c-tabs">\n                <div class="c-tabs-header">\n                    '+this.renderNavs()+'\n                </div>\n                <div class="c-tabs-content cur'+this.config.tabIdx+'">\n                    <div class="c-tabs-wrap">                        \n                        <div class="item chat"></div>\n                        <div class="item anchor"></div>\n                        <div class="item depend"></div>\n                    </div>\n                </div>\n            </div>\n        ';this.config.$root.html(t)}},{key:"toggleTab",value:function(t){switch(t=parseInt(t||0),this.config.$root.find(".c-tabs-header .item").eq(t).addClass("cur").siblings().removeClass("cur"),this.config.$root.find(".c-tabs-content").attr("class","c-tabs-content cur"+t),this.config.tabIdx=t,t){case 0:this.initChat();break;case 1:this.initAnchor();break;case 2:this.initDepend()}f.default.trigger("toggleTab","public",{tabIdx:t})}},{key:"bindEvent",value:function(){var t=this,e=this;this.config.$root.find(".c-tabs-header .item").off().on("click",function(t){var n=$(this).data("idx");e.toggleTab(n),w.default.click_ltab(n)}),e.config.$root.find(".c-tabs-content").on("swipeLeft",function(t){var n=e.config.tabIdx+1;if(n>e.config.tabs.length-1)return!1;e.toggleTab(n)}),e.config.$root.find(".c-tabs-content").on("swipeRight",function(t){var n=e.config.tabIdx-1;if(n<0)return!1;e.toggleTab(n)}),f.default.on("noVideo","public",function(e,n){t.toggleTab(n.tabIdx)})}},{key:"initChat",value:function(){this.child.appChat||(this.child.appChat=new p.default({$root:this.config.$root.find(".c-tabs-content .chat"),room:this.config.room}))}},{key:"initAnchor",value:function(){this.child.anchor||(this.child.anchor=new v.default({$root:this.config.$root.find(".c-tabs-content .anchor"),room:this.config.room}))}},{key:"initDepend",value:function(){this.child.depend||(this.child.depend=new g.default({$root:this.config.$root.find(".c-tabs-content .depend"),room:this.config.room}))}},{key:"init",value:function(){this.render(),this.bindEvent(),0==this.config.tabIdx&&this.initChat(),1==this.config.tabIdx&&this.initAnchor()}}]),t}();e.default=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),s=i(a),u=n(1),c=i(u);n(10);n(122);var l=n(14),f=n(38),d=i(f),p=n(3),h=i(p),v=n(17),m=i(v),g=n(5),y=i(g),w=function(){function t(e){(0,s.default)(this,t),this.config=(0,r.default)({$root:null,room:{room_id:0,roomSrc:"",isVertical:1,isLive:!1},video:{vid:"",videoSrc:"",isVertical:!1,duration:""}},e);var n=d.default.codeGenerator();this.Vars={isPlaying:!1,isLiveUrl:this.config.room.isLive,countTime:5,did:n},this.init()}return(0,c.default)(t,[{key:"ajaxVideoUrl",value:function(){var t=this,e=this.config.video.vid;if(!e||0==e)return void h.default.trigger("noVideo","public",{tabIdx:2});var n={vid:e};this.Vars.did&&(n.did=this.Vars.did),(0,l.G_AJAX)({url:"/video/stream",type:"GET",data:n,success:function(e){0==e.error&&e.data.video_url?(t.setVideoUrl(e.data.video_url),t.Vars.isLiveUrl=!1):h.default.trigger("noVideo","public",{tabIdx:2})}})}},{key:"ajaxLiveUrl",value:function(){var t=this,e={rid:this.config.room.room_id};this.Vars.did&&(e.did=this.Vars.did),(0,l.G_AJAX)({url:"/room/stream",data:e,success:function(e){0==e.error&&e.data.hls_url?t.setVideoUrl(e.data.hls_url):t.ajaxVideoUrl()}})}},{key:"canWebkitPlaysinline",value:function(){try{var t=navigator.userAgent.toLowerCase(),e=t.match(/cpu iphone os (\d+)\_(\d+) like/);return l.G_BROWSER_JUDGES.isIOS&&l.G_BROWSER_JUDGES.isWX&&e&&e[1]&&8==e[1]?"":"webkit-playsinline"}catch(t){return"webkit-playsinline"}}},{key:"setVideoUrl",value:function(t){var e='            \n            <video \n                src="'+t+'"\n                class="video"\n                '+this.canWebkitPlaysinline()+'\n                playsinline\n                controls="controls"\n            >\n                <span>您的手机版本，网页版暂未能支持！</span>\n            </video>\n        ';this.config.$root.find(".c-video").prepend(e),this.bindVideoEvent()}},{key:"renderTime",value:function(){var t=this.config.video.duration;return t?'<span class="time">'+t+"</span>":""}},{key:"render",value:function(){var t=this.config.room.isLive?this.config.room.roomSrc:this.config.video.videoSrc,e='\n            <div class="c-video">\n                <div class="post default">\n                    <img \n                        class="pic"\n                        src="'+t+'" \n                        alt=""\n                    />\n                    <div class="control">\n                        <span class="btn-play"></span>\n                        '+this.renderTime()+'\n                    </div>\n                </div>\n                <div class="post end">\n                    <img \n                        class="pic"\n                        src="'+t+'" \n                        alt=""\n                    />\n                    <div class="control">\n                        <span class="tip">打开斗鱼APP看更多精彩内容~</span>\n                        <span class="btn btn-open-app">打开斗鱼APP</span>\n                        <span class="count"></span>\n                    </div>\n                </div>\n            </div>\n        ';this.config.$root.html(e)}},{key:"setStatus",value:function(t){var e=t?"c-video "+t:"c-video";this.config.$root.find(".c-video").attr("class",e)}},{key:"eventListener",value:function(t,e){this.config.$root.find("video")[0].addEventListener(t,function(){e&&e()},!1)}},{key:"startCountRePlay",value:function(){var t=this,e=this.Vars.countTime;this.counter=setInterval(function(){if(e<1)return t.counter&&clearInterval(t.counter),t.config.$root.find(".post.end .count").html(""),void t.play();t.config.$root.find(".post.end .count").html(e+"s后，重新播放"),e--},1e3)}},{key:"play",value:function(){this.setStatus("playing"),this.config.$root.find("video")[0].play()}},{key:"bindVideoEvent",value:function(){var t=this;this.eventListener("play",function(){t.Vars.isPlaying=!0}),this.eventListener("ended",function(){t.Vars.isPlaying=!1,t.setStatus("end"),t.Vars.isLiveUrl||t.startCountRePlay()}),this.eventListener("error",function(){(0,l.SET_TOAST)("视频无法播放")})}},{key:"bindEvent",value:function(){var t=this;this.config.$root.find(".default .control").on("click",function(){t.config.$root.find("video.video").attr("src")?t.play():(0,l.SET_TOAST)("主播不在家"),y.default.click_play({type:t.Vars.isLiveUrl?1:2,stat:1})}),this.config.$root.find(".end .btn-open-app").on("click",function(){l.G_BROWSER_JUDGES.isWB?h.default.trigger("sinaOpenApp","public",null):m.default.openApp()}),h.default.on("wxtoggle","public",function(e,n){t.Vars.isPlaying&&(n.flag?t.config.$root.find("video").hide():t.config.$root.find("video").show())})}},{key:"init",value:function(){this.render(),this.bindEvent(),this.config.room.isLive?this.ajaxLiveUrl():this.ajaxVideoUrl()}}]),t}();e.default=w},function(t,e,n){t.exports={default:n(78),__esModule:!0}},function(t,e,n){t.exports={default:n(79),__esModule:!0}},function(t,e,n){t.exports={default:n(80),__esModule:!0}},function(t,e,n){t.exports={default:n(81),__esModule:!0}},function(t,e,n){var i=n(11),o=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},function(t,e,n){n(102),t.exports=n(11).Object.assign},function(t,e,n){n(103);var i=n(11).Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},function(t,e,n){n(106),n(104),n(107),n(108),t.exports=n(11).Symbol},function(t,e,n){n(105),n(109),t.exports=n(37).f("iterator")},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(){}},function(t,e,n){var i=n(9),o=n(100),r=n(99);t.exports=function(t){return function(e,n,a){var s,u=i(e),c=o(u.length),l=r(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var i=n(82);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var i=n(16),o=n(30),r=n(22);t.exports=function(t){var e=i(t),n=o.f;if(n)for(var a,s=n(t),u=r.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},function(t,e,n){var i=n(4).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(40);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){"use strict";var i=n(45),o=n(23),r=n(31),a={};n(12)(a,n(13)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(a,{next:o(1,n)}),r(t,e+" Iterator")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var i=n(16),o=n(9);t.exports=function(t,e){for(var n,r=o(t),a=i(r),s=a.length,u=0;s>u;)if(r[n=a[u++]]===e)return n}},function(t,e,n){var i=n(24)("meta"),o=n(21),r=n(7),a=n(8).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(15)(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,i,{value:{i:"O"+ ++s,w:{}}})},f=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,i)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[i].i},d=function(t,e){if(!r(t,i)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[i].w},p=function(t){return c&&h.NEED&&u(t)&&!r(t,i)&&l(t),t},h=t.exports={KEY:i,NEED:!1,fastKey:f,getWeak:d,onFreeze:p}},function(t,e,n){"use strict";var i=n(16),o=n(30),r=n(22),a=n(49),s=n(43),u=Object.assign;t.exports=!u||n(15)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i})?function(t,e){for(var n=a(t),u=arguments.length,c=1,l=o.f,f=r.f;u>c;)for(var d,p=s(arguments[c++]),h=l?i(p).concat(l(p)):i(p),v=h.length,m=0;v>m;)f.call(p,d=h[m++])&&(n[d]=p[d]);return n}:u},function(t,e,n){var i=n(8),o=n(19),r=n(16);t.exports=n(6)?Object.defineProperties:function(t,e){o(t);for(var n,a=r(e),s=a.length,u=0;s>u;)i.f(t,n=a[u++],e[n]);return t}},function(t,e,n){var i=n(22),o=n(23),r=n(9),a=n(35),s=n(7),u=n(42),c=Object.getOwnPropertyDescriptor;e.f=n(6)?c:function(t,e){if(t=r(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(9),o=n(46).f,r={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return o(t)}catch(t){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==r.call(t)?s(t):o(i(t))}},function(t,e,n){var i=n(7),o=n(49),r=n(32)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),i(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var i=n(34),o=n(26);t.exports=function(t){return function(e,n){var r,a,s=String(o(e)),u=i(n),c=s.length;return u<0||u>=c?t?"":void 0:(r=s.charCodeAt(u),r<55296||r>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):r:t?s.slice(u,u+2):a-56320+(r-55296<<10)+65536)}}},function(t,e,n){var i=n(34),o=Math.max,r=Math.min;t.exports=function(t,e){return t=i(t),t<0?o(t+e,0):r(t,e)}},function(t,e,n){var i=n(34),o=Math.min;t.exports=function(t){return t>0?o(i(t),9007199254740991):0}},function(t,e,n){"use strict";var i=n(83),o=n(90),r=n(28),a=n(9);t.exports=n(44)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):"keys"==e?o(0,n):"values"==e?o(0,t[n]):o(0,[n,t[n]])},"values"),r.Arguments=r.Array,i("keys"),i("values"),i("entries")},function(t,e,n){var i=n(20);i(i.S+i.F,"Object",{assign:n(93)})},function(t,e,n){var i=n(20);i(i.S+i.F*!n(6),"Object",{defineProperty:n(8).f})},function(t,e){},function(t,e,n){"use strict";var i=n(98)(!0);n(44)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var i=n(4),o=n(7),r=n(6),a=n(20),s=n(48),u=n(92).KEY,c=n(15),l=n(33),f=n(31),d=n(24),p=n(13),h=n(37),v=n(36),m=n(91),g=n(86),y=n(88),w=n(19),b=n(9),_=n(35),k=n(23),S=n(45),x=n(96),O=n(95),A=n(8),P=n(16),M=O.f,T=A.f,V=x.f,E=i.Symbol,I=i.JSON,D=I&&I.stringify,B=p("_hidden"),L=p("toPrimitive"),$={}.propertyIsEnumerable,C=l("symbol-registry"),j=l("symbols"),R=l("op-symbols"),Y=Object.prototype,F="function"==typeof E,W=i.QObject,G=!W||!W.prototype||!W.prototype.findChild,N=r&&c(function(){return 7!=S(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=M(Y,e);i&&delete Y[e],T(t,e,n),i&&t!==Y&&T(Y,e,i)}:T,U=function(t){var e=j[t]=S(E.prototype);return e._k=t,e},Q=F&&"symbol"==typeof E.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof E},J=function(t,e,n){return t===Y&&J(R,e,n),w(t),e=_(e,!0),w(n),o(j,e)?(n.enumerable?(o(t,B)&&t[B][e]&&(t[B][e]=!1),n=S(n,{enumerable:k(0,!1)})):(o(t,B)||T(t,B,k(1,{})),t[B][e]=!0),N(t,e,n)):T(t,e,n)},q=function(t,e){w(t);for(var n,i=g(e=b(e)),o=0,r=i.length;r>o;)J(t,n=i[o++],e[n]);return t},H=function(t,e){return void 0===e?S(t):q(S(t),e)},X=function(t){var e=$.call(this,t=_(t,!0));return!(this===Y&&o(j,t)&&!o(R,t))&&(!(e||!o(this,t)||!o(j,t)||o(this,B)&&this[B][t])||e)},z=function(t,e){if(t=b(t),e=_(e,!0),t!==Y||!o(j,e)||o(R,e)){var n=M(t,e);return!n||!o(j,e)||o(t,B)&&t[B][e]||(n.enumerable=!0),n}},K=function(t){for(var e,n=V(b(t)),i=[],r=0;n.length>r;)o(j,e=n[r++])||e==B||e==u||i.push(e);return i},Z=function(t){for(var e,n=t===Y,i=V(n?R:b(t)),r=[],a=0;i.length>a;)!o(j,e=i[a++])||n&&!o(Y,e)||r.push(j[e]);return r};F||(E=function(){if(this instanceof E)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===Y&&e.call(R,n),o(this,B)&&o(this[B],t)&&(this[B][t]=!1),N(this,t,k(1,n))};return r&&G&&N(Y,t,{configurable:!0,set:e}),U(t)},s(E.prototype,"toString",function(){return this._k}),O.f=z,A.f=J,n(46).f=x.f=K,n(22).f=X,n(30).f=Z,r&&!n(29)&&s(Y,"propertyIsEnumerable",X,!0),h.f=function(t){return U(p(t))}),a(a.G+a.W+a.F*!F,{Symbol:E});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)p(tt[et++]);for(var nt=P(p.store),it=0;nt.length>it;)v(nt[it++]);a(a.S+a.F*!F,"Symbol",{for:function(t){return o(C,t+="")?C[t]:C[t]=E(t)},keyFor:function(t){if(Q(t))return m(C,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){G=!0},useSimple:function(){G=!1}}),a(a.S+a.F*!F,"Object",{create:H,defineProperty:J,defineProperties:q,getOwnPropertyDescriptor:z,getOwnPropertyNames:K,getOwnPropertySymbols:Z}),I&&a(a.S+a.F*(!F||c(function(){var t=E();return"[null]"!=D([t])||"{}"!=D({a:t})||"{}"!=D(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!Q(t)){for(var e,n,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);return e=i[1],"function"==typeof e&&(n=e),!n&&y(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!Q(e))return e}),i[1]=e,D.apply(I,i)}}}),E.prototype[L]||n(12)(E.prototype,L,E.prototype.valueOf),f(E,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},function(t,e,n){n(36)("asyncIterator")},function(t,e,n){n(36)("observable")},function(t,e,n){n(101);for(var i=n(4),o=n(12),r=n(28),a=n(13)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=i[c],f=l&&l.prototype;f&&!f[a]&&o(f,a,c),r[c]=r.Array}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){}]);